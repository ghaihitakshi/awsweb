name:CI/CD

on:
  push:
    branches:
      -main

jobs:
  test:
    runs-on:ubuntu-latest

  steps:
    -name: Deploy to EC2
    uses:appleboy/ssh-action@master
    with:
      host: ${{ secrets.SSH_HOST }}
      username: ${{ secrets.SSH_USERNAME }}
      key: ${{ secrets.SSH_KEYÂ }}
      script:|
        cd awsweb
        git pull origin main
        sudo kill -9 $(sudo lsof -t -i :5173)
        npm run dev
